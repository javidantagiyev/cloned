<!DOCTYPE html>
<!--
    CSCI 2408 Computer Graphics Fall 2025
    (c)2025 by Name Surname
    Submitted in partial fulfillment of the requirements of the course.
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
<title>WebGL Team Project: Osmos 3D</title>

<script id="vertex-shader" type="x-shader/x-vertex">
    attribute vec3 vPosition;
    attribute vec3 vNormal;
    attribute vec2 vTexCoord;

    uniform mat4 ctm;
    uniform mat4 world;
    uniform mat4 normalMatrix;

    varying vec3 fNormal;
    varying vec3 fragPos;
    varying vec2 fTexCoord;

    void main() {
        gl_Position = ctm * vec4(vPosition, 1.0);
        fragPos = (world * vec4(vPosition, 1.0)).xyz;
        fNormal = mat3(normalMatrix) * vNormal;
        fTexCoord = vTexCoord;
    }
</script>

<script id="fragment-shader" type="x-shader/x-fragment">
    precision mediump float;

    struct Material {
        vec3 diffuse;
        float alpha;
    };

    varying vec3 fNormal;
    varying vec3 fragPos;
    varying vec2 fTexCoord;

    uniform vec3 ambient;
    uniform vec3 lightPos;
    uniform vec3 lightColor;
    uniform vec3 viewPos;
    uniform float shininess;
    uniform Material material;
    uniform sampler2D uTexture;
    uniform bool useTexture;

    void main() {
        vec3 norm = normalize(fNormal);
        vec3 lightDir = normalize(lightPos - fragPos);
        float diff = max(dot(norm, lightDir), 0.0);

        vec3 viewDir = normalize(viewPos - fragPos);
        vec3 reflectDir = reflect(-lightDir, norm);
        float spec = pow(max(dot(viewDir, reflectDir), 0.0), shininess);

        vec3 baseColor = material.diffuse;
        if (useTexture) {
            baseColor *= texture2D(uTexture, fTexCoord).rgb;
        }

        vec3 lighting = ambient * baseColor + diff * lightColor * baseColor + spec * lightColor;
        gl_FragColor = vec4(lighting, material.alpha);
    }
</script>

<!-- Copyright (c) <2012-2015> Ed Angel and Dave Shreiner -->
<script type="text/javascript" src="common/webgl-utils.js"></script>
<script type="text/javascript" src="common/initShaders.js"></script>
<script type="text/javascript" src="common/MV.js"></script>
<!-- Copyright (c) <2012-2015> Ed Angel and Dave Shreiner -->
    <script type="text/javascript" src="camera.js"></script>
    <script type="text/javascript" src="model.js"></script>
    <script type="text/javascript" src="sphere.js"></script>
    <script type="text/javascript" src="player.js"></script>
    <script type="text/javascript" src="controls.js"></script>
    <script type="text/javascript" src="renderer.js"></script>
    <script type="text/javascript" src="lighting.js"></script>
    <script type="text/javascript" src="osmos3d-team03.js"></script>
</head>

<body style="background-color: #888888;">
    <center>
        <canvas id="gl-canvas" width="800" height="600">
            Sorry ... your browser doesn't support the HTML5 canvas element.
        </canvas>
    </center>
</body>
</html>
